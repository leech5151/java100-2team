<meta charset="UTF-8">
<h2>Welcome home!</h2>
 <div id="blist-container">
    <div id="portfolio"></div>
	    <ul id="portfolio-item">
	    </ul>
    <nav aria-label="Page navigation">
	  <ul class="pagination justify-content-center">
	    <li class="page-item">
	        <a id="prevBtn" class="page-link" tabindex="-1">이전</a></li>
	        
	    <li class="page-item">
	        <a id="currBtn" class="page-link" href="#">1</a></li>
	    
	    <li class="page-item">
	        <a id="nextBtn" class="page-link" tabindex="0">다음</a></li>
	  </ul>
	</nav>
  </div> 
  <!-- <a href="../business/form.html?no={{businessNo}}"></a> -->
<script src='../../node_modules/handlebars/dist/handlebars.min.js'></script>
<script src='../../node_modules/jquery/dist/jquery.js'></script>
<script src='../../node_modules/bootstrap/dist/js/bootstrap.min.js'></script>
<script src='../../node_modules/sweetalert/dist/sweetalert.min.js'></script>
<script src="../../node_modules/sweetalert2/dist/sweetalert2.all.js"></script>
<script id="template" type="text/x-handlebars-template">
{{#each list}}
{{#each files}}
<div style="background:url({{filename}})"> <span>{{businessName}}</span></div>


{{/each}}
{{/each}}
</script>
<!-- <li><img src="../../download/{{filename}}" alt={{businessName}} /></li>
<li>{{businessName}}</li> -->
<script type="text/javascript">
/* words = $('#words'),
searchBtn = $('#searchBtn'), */
var prevBtn = $('#prevBtn'),
currBtn = $('#currBtn'),
nextBtn = $('#nextBtn'),
ulP = $('#portfolio > #portfolio-item'),
ulF = $('#food-list > #portfolio-item'),
ulE = $('#ect-list > #portfolio-item'),
currPageNo = 1;
templateSrc = $('#template').html(),
templateEngine = Handlebars.compile(templateSrc);
load(1);

/* searchBtn.click(() => {
//event.preventDefault();
load(1, {
    "words": words.value
})
}); */

prevBtn.click(() => {
load(currPageNo - 1)
});

nextBtn.click(() => {
load(currPageNo + 1)
});


function load(pageNo, options) {

if (options == undefined) options = {};
options.pn = pageNo;

var count;
$.ajax('../../json/business/list', {
    /*method: 'GET',*/
    data: options,
    dataType: 'json',  
    success: (result) => {
    	ulP.html(templateEngine(result));
    	 for(var data of result.list){
    	 
        var b_name = data.businessName;
        var b_no = data.businessNo;
    	 }
        currPageNo = result.pageNo;
        currBtn.html(currPageNo);
        
        if (result.pageNo == 1) {
            $(prevBtn.parent()).addClass("disabled");
        } else {
            $(prevBtn.parent()).removeClass("disabled");
        }
        
        if (result.lastPageNo == result.pageNo) {
            $(nextBtn.parent()).addClass("disabled");
        } else {
            $(nextBtn.parent()).removeClass("disabled");
        }
    },
    error: () => {
        window.alert('���� ���� ����! blist');
    }
});
}


</script>
<script src="../../together-list/javascript/demo.js"></script>
					  